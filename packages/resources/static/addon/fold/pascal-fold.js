(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)})(function(b){b.registerHelper("fold","pascal-fold",function(c,n){function h(x){for(var l=n.ch,v=0;;)if(l=0>=l?-1:m.toLowerCase().lastIndexOf(x,l-1),-1==l){if(1==v)break;v=1;l=m.length}else{if(1==v&&l<n.ch)break;e=c.getTokenTypeAt(b.Pos(d,l+1));if(!/^(comment|string)/.test(e))return l+1;--l}}var d=n.line,m=c.getLine(d),
e,f=h("repeat"),a=h("begin");if(null!=f&&(null==a||a>f)){var k=f;f="repeat";a="until"}else if(null!=a)k=a,f="begin",a="end";else return;var p=1,t=c.lastLine(),q=d;a:for(;q<=t;++q)for(var r=c.getLine(q),g=q==d?k:0;;){var u=r.indexOf(f,g);g=r.indexOf(a,g);0>u&&(u=r.length);0>g&&(g=r.length);g=Math.min(u,g);if(g==r.length)break;if(c.getTokenTypeAt(b.Pos(q,g+1))==e)if(g==u)++p;else if(!--p){var w=q;var y=g;break a}++g}if(null!=w&&d!=w)return{from:b.Pos(d,k),to:b.Pos(w,y)}});b.registerHelper("fold","import",
function(c,n){function h(a){if(a<c.firstLine()||a>c.lastLine())return null;var k=c.getTokenAt(b.Pos(a,1));/\S/.test(k.string)||(k=c.getTokenAt(b.Pos(a,k.end+1)));if("keyword"!=k.type||"import"!=k.string)return null;var p=a;for(a=Math.min(c.lastLine(),a+10);p<=a;++p){var t=c.getLine(p).indexOf(";");if(-1!=t)return{startCh:k.end,end:b.Pos(p,t)}}}var d=n.line,m=h(d),e;if(!m||h(d-1)||(e=h(d-2))&&e.end.line==d-1)return null;for(e=m.end;;){var f=h(e.line+1);if(null==f)break;e=f.end}return{from:c.clipPos(b.Pos(d,
m.startCh+1)),to:e}});b.registerHelper("fold","include",function(c,n){function h(f){if(f<c.firstLine()||f>c.lastLine())return null;var a=c.getTokenAt(b.Pos(f,1));/\S/.test(a.string)||(a=c.getTokenAt(b.Pos(f,a.end+1)));if("meta"==a.type&&"#include"==a.string.slice(0,8))return a.start+8}var d=n.line,m=h(d);if(null==m||null!=h(d-1))return null;for(var e=d;null!=h(e+1);)++e;return{from:b.Pos(d,m+1),to:c.clipPos(b.Pos(e))}})});